<app-toolbar-form [header]="'Add a Client'"></app-toolbar-form>

<p-tabs value="0" styleClass="p-3">
  <p-tablist *ngIf="addClient">
    <p-tab value="0">Company</p-tab>
    <p-tab value="1">Individual</p-tab>
  </p-tablist>

  <p-tabpanels>
    <p-tabpanel value="0">
      <p-stepper [value]="1" class="basis-[50rem] mb-2">
        <p-step-panels>
          <!-- Step 1: Main Info -->
          <p-step-panel [value]="1">
            <ng-template #content let-activateCallback="activateCallback">
              <div class="flex flex-col">
                <app-form
                  [formGroup]="addClientForm"
                  [title]="'Main Information'"
                  [description]="
                    'Introduce your company core info quickly to users by fill up company details'
                  "
                  [addClientShowMain]="true"
                  [addClient]="true"
                ></app-form>

                <!-- Listen to selected sectorId -->
                <app-sector-dropdown
                  [formControl]="sectorIdControl"
                  (sectorChanged)="onSectorChanged($event)"
                ></app-sector-dropdown>

                <!-- Pass sectorId and all sectors to subsector dropdown -->
                <app-sub-sector-dropdown
                  [sectorId]="selectedSectorId"
                  [allSectors]="sectorsList"
                ></app-sub-sector-dropdown>

                <div
                  class="col-sm-6 d-flex justify-end float-right margin-top p-0 w-100"
                  (click)="activateCallback(2)"
                >
                  <p-button class="custom-save m-0" label="Next"></p-button>
                </div>
              </div>
            </ng-template>
          </p-step-panel>

          <!-- Step 2: Legal Info -->
          <p-step-panel [value]="2">
            <ng-template #content let-activateCallback="activateCallback">
              <div class="flex flex-col">
                <app-form
                  [formGroup]="addClientForm"
                  [title]="'Legal Information'"
                  [description]="'This information will be displayed publicly'"
                  [addClientShowLegal]="true"
                  [addClient]="true"
                ></app-form>

                <div class="row two-buttons margin-top">
                  <div class="col-sm-6" (click)="activateCallback(1)">
                    <p-button label="Previous" class="custom-back"></p-button>
                  </div>
                  <div class="col-sm-6 m-0" (click)="activateCallback(3)">
                    <p-button
                      label="Next"
                      class="custom-save m-0 float-right"
                    ></p-button>
                  </div>
                </div>
              </div>
            </ng-template>
          </p-step-panel>

          <!-- Step 3: Business Info -->
          <p-step-panel [value]="3">
            <ng-template #content let-activateCallback="activateCallback">
              <div class="flex flex-col">
                <app-form
                  [formGroup]="addClientForm"
                  [title]="'Business Information'"
                  [description]="'This information will be displayed publicly'"
                  [addClientShowBusiness]="true"
                  [addClient]="true"
                ></app-form>

                <div class="row two-buttons margin-top">
                  <div class="col-sm-6" (click)="activateCallback(2)">
                    <p-button
                      label="Previous"
                      class="custom-back d-flex justify-start"
                    ></p-button>
                  </div>
                  <div class="col-sm-6 m-0" (click)="saveInfo()">
                    <p-button
                      label="Save Information"
                      class="custom-save2 m-0 float-right"
                    ></p-button>
                  </div>
                </div>
              </div>
            </ng-template>
          </p-step-panel>
        </p-step-panels>
      </p-stepper>
    </p-tabpanel>

    <!-- Individual Tab -->
    <p-tabpanel value="1">
      <app-form
        [formGroup]="addClientForm"
        [title]="'Main Information'"
        [description]="
          'Introduce your company core info quickly to users by fill up company details'
        "
        [addClientShowIndividual]="true"
        [addClient]="true"
      ></app-form>

      <div class="row justify-end">
        <div
          class="col-sm-12 col-md-6 d-flex justify-end margin-top"
          (click)="saveInfo()"
        >
          <p-button
            label="Save Information"
            class="custom-save m-0 float-right"
          ></p-button>
        </div>
      </div>
    </p-tabpanel>
  </p-tabpanels>
</p-tabs>
